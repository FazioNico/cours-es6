!function e(n,t,i){function o(r,s){if(!t[r]){if(!n[r]){var l="function"==typeof require&&require;if(!s&&l)return l(r,!0);if(a)return a(r,!0);var u=new Error("Cannot find module '"+r+"'");throw u.code="MODULE_NOT_FOUND",u}var c=t[r]={exports:{}};n[r][0].call(c.exports,function(e){var t=n[r][1][e];return o(t?t:e)},c,c.exports,e,n,t,i)}return t[r].exports}for(var a="function"==typeof require&&require,r=0;r<i.length;r++)o(i[r]);return o}({1:[function(e,n,t){"use strict";function i(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}var o=function(){function e(e,n){for(var t=0;t<n.length;t++){var i=n[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(n,t,i){return t&&e(n.prototype,t),i&&e(n,i),n}}(),a=e("./pages/home/home"),r=e("./pages/user/user"),s=e("./providers/storage/storage-service"),l=function(){function e(){i(this,e),this.appBody=document.getElementsByTagName("app")[0],this.storage=new s.StorageService,this.storage.loadData()}return o(e,[{key:"start",value:function(){if(this.storage.isAuth())console.log("user is auth-> ",this.storage.db[0].user),new r.UserPage(this.appBody,this.storage);else{console.log("user is not auth-> ",this.storage.db[0]);new a.HomePage(this.appBody,this.storage)}}}]),e}(),u=new l;u.start()},{"./pages/home/home":6,"./pages/user/user":8,"./providers/storage/storage-service":10}],2:[function(e,n,t){"use strict";function i(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.BackgroundComponent=void 0;var o=function(){function e(e,n){for(var t=0;t<n.length;t++){var i=n[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(n,t,i){return t&&e(n.prototype,t),i&&e(n,i),n}}(),a=e("../../providers/unsplash/unsplash-service");t.BackgroundComponent=function(){function e(){i(this,e),console.log("Hello BackgroundComponent!"),this.unsplash=new a.UnsplashService,this.pageContainer=document.getElementsByTagName("section")[0],this.addressContainer=document.getElementsByTagName("address")[0],this.downEl=document.getElementById("download"),this.getBackgroundIMG()}return o(e,[{key:"getBackgroundIMG",value:function(){var e=this,n=this.unsplash.getRandomImg();n.then(function(n){return e.displayBackground(JSON.parse(n)),n}).then(function(n){e.displayImgInfo(JSON.parse(n))}).catch(function(n){e.handleErrors(n)})}},{key:"displayBackground",value:function(e){var n=this;if(this.pageContainer){this.pageContainer.style.color="#fff",this.pageContainer.style.backgroundSize="cover";var t=new Image;t.src=e[0].urls.regular,this.pageContainer.style.background="url("+e[0].urls.regular+") center center no-repeat",t.addEventListener("load",function(e){console.log("Background img loaded!"),n.fadeIn(n.pageContainer)})}}},{key:"displayImgInfo",value:function(e){var n=this;this.addressContainer&&(this.addressContainer.style.cursor="pointer",this.addressContainer.style.textDecoration="underline",this.addressContainer.style.display="inline",this.addressContainer.innerHTML=""+e[0].user.name,this.addressContainer.addEventListener("click",function(t){return n.onGoToLink(t,"https://unsplash.com/@"+e[0].user.username)},!1)),this.downEl&&this.downEl.addEventListener("click",function(t){return n.onGoToLink(t,e[0].links.download)},!1)}},{key:"onGoToLink",value:function(e,n){e.preventDefault();var t=window.open(n,"_blank");t.focus()}},{key:"fadeIn",value:function(e){e.classList.add("fadeIn")}},{key:"handleErrors",value:function(e){if(console.log("XXXXXXX ERROR -> "),console.log(e),this.addressContainer&&(this.addressContainer.parentElement.innerHTML=""),this.downEl&&(this.downEl.innerHTML=""),document.getElementById("search")&&(document.getElementById("search").parentElement.innerHTML=""),document.getElementById("LinksComponent")&&(document.getElementById("LinksComponent").innerHTML=""),this.pageContainer){if(document.getElementById("time")){var n='\n          <div class="chip red lighten-2">\n            <span class="white-text">'+e+"</span>\n          </div>\n        ";document.getElementById("time").parentElement.insertAdjacentHTML("afterbegin",n)}this.pageContainer.style.color="#fff",this.pageContainer.style.backgroundSize="cover",this.fadeIn(this.pageContainer)}}}]),e}()},{"../../providers/unsplash/unsplash-service":12}],3:[function(e,n,t){"use strict";function i(e){if(Array.isArray(e)){for(var n=0,t=Array(e.length);n<e.length;n++)t[n]=e[n];return t}return Array.from(e)}function o(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.LinksComponent=void 0;var a=function(){function e(e,n){for(var t=0;t<n.length;t++){var i=n[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(n,t,i){return t&&e(n.prototype,t),i&&e(n,i),n}}(),r=e("../../providers/links/links-service");t.LinksComponent=function(){function e(){o(this,e),console.log("Hello LinksComponent!"),this.content=document.getElementById("LinksComponent"),this.initUI(),this.loadLinksData()}return a(e,[{key:"initUI",value:function(){if(this.content){var e='\n        <div class="row">\n          <div class="col s12">\n            <div id="linksData"></div>\n          </div>\n        </div>\n      ';this.content.insertAdjacentHTML("afterbegin",e)}}},{key:"loadLinksData",value:function(){var e=this,n=new r.LinksService;n.getData().then(function(n){e.displayDataLinks(n)})}},{key:"displayDataLinks",value:function(e){var n=[].concat(i(e)),t=n.map(function(e){return'<a href="'+e.url+'" class="btn transparent z-depth-0" target="_blank" title="'+e.altTitle+'">'+e.title+"</a>"}),o=document.getElementById("linksData");o&&(o.innerHTML=t.join())}}]),e}()},{"../../providers/links/links-service":9}],4:[function(e,n,t){"use strict";function i(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,n){for(var t=0;t<n.length;t++){var i=n[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(n,t,i){return t&&e(n.prototype,t),i&&e(n,i),n}}();t.TimerComponent=function(){function e(){i(this,e),console.log("Hello Timer components!"),this.time=new Date,this.displayTime()}return o(e,[{key:"displayTime",value:function(){var e=this,n=document.getElementById("time");n&&(n.innerHTML=this.getTime(this.time),n.style.fontSize="10rem",n.style.margin="0rem",setInterval(function(){e.time=new Date,n.innerHTML=e.getTime(e.time)},1e3))}},{key:"getTime",value:function(e){return'\n    <time datetime="'+(e.getFullYear()<10?"0"+e.getFullYear():e.getFullYear())+"-"+(e.getMonth()<10?"0"+e.getMonth():e.getMonth())+"-"+(e.getDate()<10?"0"+e.getDate():e.getDate())+" "+(e.getHours()<10?"0"+e.getHours():e.getHours())+":"+(e.getMinutes()<10?"0"+e.getMinutes():e.getMinutes())+":"+(e.getSeconds()<10?"0"+e.getSeconds():e.getSeconds())+'">\n      '+(e.getHours()<10?"0"+e.getHours():e.getHours())+":"+(e.getMinutes()<10?"0"+e.getMinutes():e.getMinutes())+":"+(e.getSeconds()<10?"0"+e.getSeconds():e.getSeconds())+"\n    </time >\n    "}}]),e}()},{}],5:[function(e,n,t){"use strict";function i(e){return'\n    <section class=" valign-wrapper ">\n      <div class="valign">\n        <div class=" row">\n\n          <div class="col s6 offset-s3">\n            <h1>'+e.pageTitle+'</h1>\n            <p>Please login to use this application</p>\n            <form>\n              <p>\n                <label for="email">Email:</label> <input type="email" name="email" value="" placeholder="your@email.com"  /><br/>\n                <label for="password">Password:</label> <input type="password" name="password" value=""  /><br/>\n                <button>Login</button>\n              </p>\n            </form>\n          </div>\n\n        </div>\n      </div>\n\n    </section>'}Object.defineProperty(t,"__esModule",{value:!0}),t.homeSkeleton=i},{}],6:[function(e,n,t){"use strict";function i(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.HomePage=void 0;var o=function(){function e(e,n){for(var t=0;t<n.length;t++){var i=n[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(n,t,i){return t&&e(n.prototype,t),i&&e(n,i),n}}(),a=e("./home-skeleton"),r=e("../../pages/user/user");t.HomePage=function(){function e(n,t){i(this,e),this.appBody=n,this.pageTitle="Welcome",this.storage=t,this.initUI()}return o(e,[{key:"initUI",value:function(){document.getElementsByTagName("section")[0]&&document.getElementsByTagName("section")[0].parentNode.removeChild(document.getElementsByTagName("section")[0]);var e=this.getPageSkeleton();this.appBody.insertAdjacentHTML("afterbegin",e),this.loadEventUI()}},{key:"getPageSkeleton",value:function(){var e={};return e.pageTitle=this.pageTitle,(0,a.homeSkeleton)(e)}},{key:"loadEventUI",value:function(){var e=this,n=document.getElementsByTagName("form")[0];n.addEventListener("submit",function(n){return e.onLogin(n)},!1)}},{key:"onLogin",value:function(e){e.preventDefault();for(var n=0,t={},i=document.forms[0].elements,o=0;o<i.length;o++)i[o].value&&(t[i[o].name]=i[o].value,n++);2===n&&(this.storage.login(t),console.log("load UserPage"),new r.UserPage(this.appBody,this.storage))}}]),e}()},{"../../pages/user/user":8,"./home-skeleton":5}],7:[function(e,n,t){"use strict";function i(e){return'\n    <section class="valign-wrapper">\n\n      <nav class="row transparent z-depth-0 flow-text">\n        <div class="input-field col s6">\n          <i id="icon-search" class="material-icons prefix">search</i>\n          <input id="search" type="text" class="validate">\n        </div>\n        <div class="col s6 right-align">\n            <i id="download" class="material-icons">file_download</i>\n        </div>\n      </nav>\n\n      <main class="valign center-align">\n        <div class="row">\n          <div class="col s12">\n            <h1 id="time"></h1>\n            <p class="greetings">'+e.pageTitle+" "+e.userName+'!</p>\n          </div>\n        </div>\n        <div id="LinksComponent"></div>\n      </main>\n\n      <footer>\n        <div class="row">\n          <div class="col s6 left-align">Photo by <address class="author"></address></div>\n          <div class="col s6 right-align">This app using <a href="https://unsplash.com" target="_blank" title="Unsplash API">Unsplash API</a></div>\n        </div>\n      </footer>\n\n    </section>\n  '}Object.defineProperty(t,"__esModule",{value:!0}),t.userSkeleton=i},{}],8:[function(e,n,t){"use strict";function i(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.UserPage=void 0;var o=function(){function e(e,n){for(var t=0;t<n.length;t++){var i=n[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(n,t,i){return t&&e(n.prototype,t),i&&e(n,i),n}}(),a=e("./user-skeleton"),r=e("../../components/timer/timer-component"),s=e("../../components/links/links-component"),l=e("../../components/background/background-component");t.UserPage=function(){function e(n,t){i(this,e),this.appBody=n,this.formData=t.db[0].user,this.time=new Date,this.pageTitle=this.grettings(),this.userName=this.getUserName(),this.initUI(),this.loadEventUI()}return o(e,[{key:"initUI",value:function(){document.getElementsByTagName("section")[0]&&document.getElementsByTagName("section")[0].parentNode.removeChild(document.getElementsByTagName("section")[0]);var e=this.getPageSkeleton();this.appBody.insertAdjacentHTML("afterbegin",e),document.getElementsByTagName("section")[0].classList.add("displayOpacity"),this.displayTime(),this.displayLinks(),this.getBackgroundIMG()}},{key:"getPageSkeleton",value:function(){var e={};return e.pageTitle=this.pageTitle,e.userName=this.userName,(0,a.userSkeleton)(e)}},{key:"loadEventUI",value:function(){var e=this,n=document.getElementById("search");n&&n.addEventListener("keyup",function(n){"Enter"===n.key&&n.target.value.length>=1&&(console.log("https://www.google.ch/search?q="+n.target.value),e.onGoToLink(n,"https://www.google.ch/search?q="+n.target.value),n.target.value="",n.target.blur())});var t=document.getElementById("icon-search");t&&t.addEventListener("click",function(e){n&&n.focus()})}},{key:"displayTime",value:function(){new r.TimerComponent}},{key:"displayLinks",value:function(){new s.LinksComponent}},{key:"getBackgroundIMG",value:function(){new l.BackgroundComponent}},{key:"onGoToLink",value:function(e,n){e.preventDefault();var t=window.open(n,"_blank");t.focus()}},{key:"grettings",value:function e(){var e=void 0;switch(!0){case this.time.getHours()>5&&this.time.getHours()<=10:e="Good morning";break;case this.time.getHours()>=11&&this.time.getHours()<=17:e="Hello";break;default:e="Good evening"}return e}},{key:"getUserName",value:function(){return this.formData.email.split("@")[0].split(" ").map(function(e){return e.slice(0,1).toUpperCase()+e.slice(1)}).join(" ")}}]),e}()},{"../../components/background/background-component":2,"../../components/links/links-component":3,"../../components/timer/timer-component":4,"./user-skeleton":7}],9:[function(e,n,t){"use strict";function i(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,n){for(var t=0;t<n.length;t++){var i=n[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(n,t,i){return t&&e(n.prototype,t),i&&e(n,i),n}}();t.LinksService=function(){function e(){i(this,e),console.log("Hello LinksService!"),this.arrayData=[{title:"Github",url:"https://github.com/fazionico",altTitle:"Follow Nicolas Fazio on Github"},{title:"Web site",url:"http://nicolasfazio.ch/",altTitle:"Nicolas Fazio, Hybrid Mobile & Web developper"},{title:"Twitter",url:"https://twitter.com/fazionico",altTitle:"Follow Nicolas Fazio on Twitter"}]}return o(e,[{key:"getData",value:function(){var e=this;return new Promise(function(n){n(e.arrayData)})}}]),e}()},{}],10:[function(e,n,t){"use strict";function i(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,n){for(var t=0;t<n.length;t++){var i=n[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(n,t,i){return t&&e(n.prototype,t),i&&e(n,i),n}}();t.StorageService=function(){function e(){i(this,e),this.dbName="browser-dev",this.db=[]}return o(e,[{key:"loadData",value:function(){var e=this.read();e?this.db.push(e):(this.create(),this.db.push({})),console.log("StorageService: database ready ->",this.db)}},{key:"isAuth",value:function(){if(this.db[0].user)return this.db[0]}},{key:"login",value:function(e){console.log("StorageService: login->",e);var n=this.isAuth();n||(this.db[0].user=e,this.update())}},{key:"create",value:function(){console.log("StorageService: create->",this.dbName),localStorage.setItem(this.dbName,JSON.stringify({}))}},{key:"read",value:function(){console.log("StorageService: read->",this.dbName);var e=localStorage.getItem(this.dbName);if(e)return JSON.parse(e)}},{key:"update",value:function(){console.log("StorageService: update->",this.db[0]),localStorage.setItem(this.dbName,JSON.stringify(this.db[0]))}},{key:"delete",value:function(e){}}]),e}()},{}],11:[function(e,n,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.API_KEY_CONFIG={client_id:"8560f3274856a42259232fa219050bc7edc3d7025514987a4b3b0becc17ba029",client_secret:"4674868e0865fcf7a2b63e1570d98f6e7470d8cd2cad3c4d7f8573c82702436d"}},{}],12:[function(e,n,t){"use strict";function i(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.UnsplashService=void 0;var o=function(){function e(e,n){for(var t=0;t<n.length;t++){var i=n[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(n,t,i){return t&&e(n.prototype,t),i&&e(n,i),n}}(),a=e("../../providers/unsplash/apiKey-config");t.UnsplashService=function(){function e(){i(this,e),this.data=[],this.params=a.API_KEY_CONFIG,this.queryUrl="https://api.unsplash.com/photos/random?count=1&client_id=",console.log("hello UnsplashService!")}return o(e,[{key:"getRandomImg",value:function(){var e=this;return new Promise(function(n,t){var i=new XMLHttpRequest;i.open("GET",e.queryUrl+e.params.client_id),i.onload=function(){200==i.status?n(i.responseText):t(Error(i.statusText))},i.onerror=function(){t(Error("Network Error"))},i.send()})}}]),e}()},{"../../providers/unsplash/apiKey-config":11}]},{},[1]);
//# sourceMappingURL=bundle.js.map
