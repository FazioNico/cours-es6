!function e(n,t,i){function r(o,s){if(!t[o]){if(!n[o]){var l="function"==typeof require&&require;if(!s&&l)return l(o,!0);if(a)return a(o,!0);var u=new Error("Cannot find module '"+o+"'");throw u.code="MODULE_NOT_FOUND",u}var c=t[o]={exports:{}};n[o][0].call(c.exports,function(e){var t=n[o][1][e];return r(t?t:e)},c,c.exports,e,n,t,i)}return t[o].exports}for(var a="function"==typeof require&&require,o=0;o<i.length;o++)r(i[o]);return r}({1:[function(e,n,t){"use strict";function i(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}var r=function(){function e(e,n){for(var t=0;t<n.length;t++){var i=n[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(n,t,i){return t&&e(n.prototype,t),i&&e(n,i),n}}(),a=e("./pages/home/home"),o=e("./pages/user/user"),s=e("./providers/storage/storage-service"),l=function(){function e(){i(this,e),this.appBody=document.getElementsByTagName("app")[0],this.storage=new s.StorageService,this.storage.loadData()}return r(e,[{key:"start",value:function(){if(this.storage.isAuth())console.log("user auth-> ",this.storage.isAuth(),this.storage.db[this.storage.currentUser]),new o.UserPage(this.appBody,this.storage);else{console.log("user auth-> ",this.storage.isAuth());new a.HomePage(this.appBody,this.storage)}}}]),e}(),u=new l;u.start()},{"./pages/home/home":7,"./pages/user/user":9,"./providers/storage/storage-service":11}],2:[function(e,n,t){"use strict";function i(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.BackgroundComponent=void 0;var r=function(){function e(e,n){for(var t=0;t<n.length;t++){var i=n[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(n,t,i){return t&&e(n.prototype,t),i&&e(n,i),n}}(),a=e("../../providers/unsplash/unsplash-service");t.BackgroundComponent=function(){function e(){i(this,e),console.log("Hello BackgroundComponent!"),this.unsplash=new a.UnsplashService,this.pageContainer=document.getElementsByTagName("section")[0],this.addressContainer=document.getElementsByTagName("address")[0],this.downEl=document.getElementById("download"),this.getBackgroundIMG()}return r(e,[{key:"getBackgroundIMG",value:function(){var e=this,n=this.unsplash.getRandomImg();n.then(function(n){return e.displayBackground(JSON.parse(n)),n}).then(function(n){e.displayImgInfo(JSON.parse(n))}).catch(function(n){e.handleErrors(n)})}},{key:"displayBackground",value:function(e){var n=this;if(this.pageContainer){this.pageContainer.style.color="#fff",this.pageContainer.style.backgroundSize="cover";var t=new Image;t.src=e[0].urls.regular,this.pageContainer.style.background="url("+e[0].urls.regular+") center center no-repeat",t.addEventListener("load",function(e){console.log("Background img loaded!"),n.fadeIn(n.pageContainer)})}}},{key:"displayImgInfo",value:function(e){var n=this;this.addressContainer&&(this.addressContainer.style.cursor="pointer",this.addressContainer.style.textDecoration="underline",this.addressContainer.style.display="inline",this.addressContainer.innerHTML=""+e[0].user.name,this.addressContainer.addEventListener("click",function(t){return n.onGoToLink(t,"https://unsplash.com/@"+e[0].user.username)},!1)),this.downEl&&this.downEl.addEventListener("click",function(t){return n.onGoToLink(t,e[0].links.download)},!1)}},{key:"onGoToLink",value:function(e,n){e.preventDefault();var t=window.open(n,"_blank");t.focus()}},{key:"fadeIn",value:function(e){e.classList.add("fadeIn")}},{key:"handleErrors",value:function(e){if(console.log("XXXXXXX ERROR -> "),console.log(e),this.addressContainer&&(this.addressContainer.parentElement.innerHTML=""),this.downEl&&(this.downEl.innerHTML=""),document.getElementById("search")&&(document.getElementById("search").parentElement.innerHTML=""),document.getElementById("LinksComponent")&&(document.getElementById("LinksComponent").innerHTML=""),this.pageContainer){if(document.getElementById("time")){var n='\n          <div class="chip red lighten-2">\n            <span class="white-text">'+e+"</span>\n          </div>\n        ";document.getElementById("time").parentElement.insertAdjacentHTML("afterbegin",n)}this.pageContainer.style.color="#fff",this.pageContainer.style.backgroundSize="cover",this.fadeIn(this.pageContainer)}}}]),e}()},{"../../providers/unsplash/unsplash-service":13}],3:[function(e,n,t){"use strict";function i(e){if(Array.isArray(e)){for(var n=0,t=Array(e.length);n<e.length;n++)t[n]=e[n];return t}return Array.from(e)}function r(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.LinksComponent=void 0;var a=function(){function e(e,n){for(var t=0;t<n.length;t++){var i=n[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(n,t,i){return t&&e(n.prototype,t),i&&e(n,i),n}}(),o=e("../../providers/links/links-service"),s=e("./links-skeleton");t.LinksComponent=function(){function e(n){r(this,e),console.log("Hello LinksComponent!"),this.mainContent=document.getElementsByTagName("main")[0],this.content=document.getElementById("LinksComponent"),this.storageService=n,this.linksService=new o.LinksService,this.initUI(),this.loadLinksData(),this.loadEventUI()}return a(e,[{key:"initUI",value:function(){if(this.content){var e={};e.user=this.storageService.db[this.storageService.currentUser].user;var n=this.getSkeleton(s.asideSkeleton,e),t=this.getSkeleton(s.linkSkeleton);this.mainContent.insertAdjacentHTML("afterend",n),this.content.insertAdjacentHTML("afterbegin",t)}}},{key:"getSkeleton",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e(n)}},{key:"loadLinksData",value:function(){var e=this;this.linksService.initData(this.storageService),this.linksService.getData().then(function(n){e.displayDataLinksBtn(n),e.displayDataLinksInput(n)})}},{key:"displayDataLinksBtn",value:function(e){var n=[].concat(i(e)),t=n.map(function(e){return'<a href="'+e.url+'" class="btn transparent z-depth-0" target="_blank" title="'+e.title+'">'+e.title+"</a>"}),r=document.getElementById("linksData");r&&(r.innerHTML=t.join(" "))}},{key:"displayDataLinksInput",value:function(e){for(var n=this,t=[].concat(i(e)),r=0,a=t.map(function(e){var t={};t.indexInput=r,t.link=e;var i=n.getSkeleton(s.inputLinksSkeleton,t);return++r,i}),o=0;o<3;o++)if(a.length<3){var l={};l.indexInput=a.length,l.link={title:"",url:""};var u=this.getSkeleton(s.inputLinksSkeleton,l);++r,a.push(u)}var c=document.getElementById("linkSettingForm");c&&(c.innerHTML=a.join(" "))}},{key:"saveData",value:function(e){console.log("Save data-> ",e),this.linksService.saveData(e),this.toggleAside(),this.displayDataLinks(e)}},{key:"loadEventUI",value:function(){var e=this,n=document.getElementById("saveLinksData");n&&n.addEventListener("click",function(n){return e.formValidator(n)});var t=document.getElementsByClassName("close");if(t)for(var i=0;i<t.length;i++)t[i].addEventListener("click",function(n){n.preventDefault(),e.toggleAside(n)});document.getElementById("logout");logout&&logout.addEventListener("click",function(n){return e.logOut()})}},{key:"formValidator",value:function(e){e.preventDefault();for(var n=[],t=document.getElementById("linkSettingForm").elements,i=0;i<t.length;i++)n[t[i].name]?n[t[i].name].url=t[i].value:n.push({title:t[i].value});var r=[];n.map(function(e){e.title&&e.title.length>0&&e.url.length>0&&r.push(e)}),this.saveData(r)}},{key:"toggleAside",value:function(){var e=document.getElementsByTagName("aside")[0];e&&e.classList.toggle("open")}},{key:"logOut",value:function(){console.log("user logout"),this.storageService.db[this.storageService.currentUser].user.isAuth=!1,this.storageService.update(),this.toggleAside(),location.reload()}}]),e}()},{"../../providers/links/links-service":10,"./links-skeleton":4}],4:[function(e,n,t){"use strict";function i(e){return'\n    <div class="row">\n      <div class="col s12">\n        <div id="linksData"></div>\n      </div>\n    </div>\n  '}function r(e){return'\n    <aside>\n    <div id="close" class="close">Settings</div>\n      <div class="container">\n        <h1>User Profil</h1>\n        <div class="row">\n          <div class="col s12">\n            <span>\n              You\'re connected as <b>'+e.user.email+'</b>. Want to <span id="logout">logout?</span>\n            </span>\n          </div>\n        </div>\n        <h1>Links Settings:</h1>\n        <form id="linkSettingForm">\n          <div class="row">\n            <div class="input-field col s4">\n              <input placeholder="title" name="0" type="text" class="validate">\n            </div>\n            <div class="input-field col s8">\n              <input placeholder="url" name="0" type="url" class="validate">\n            </div>\n          </div>\n          <div class="row">\n            <div class="input-field col s4">\n              <input placeholder="title" name="1" type="text" class="validate">\n            </div>\n            <div class="input-field col s8">\n              <input placeholder="url" name="1" type="url" class="validate">\n            </div>\n          </div>\n          <div class="row">\n            <div class="input-field col s4">\n              <input placeholder="title" name="2" type="text" class="validate">\n            </div>\n            <div class="input-field col s8">\n              <input placeholder="url" name="2" type="url" class="validate">\n            </div>\n          </div>\n        </form>\n        <div class="row">\n            <button class="close">\n              Cancel\n            </button>\n            <button id="saveLinksData">\n              Save\n            </button>\n        </div>\n      </div>\n    </aside>\n  '}function a(e){return'\n    <div class="row">\n      <div class="input-field col s4">\n        <input placeholder="title" name="'+e.indexInput+'" type="text" class="validate" value="'+e.link.title+'">\n      </div>\n      <div class="input-field col s8">\n        <input placeholder="url" name="'+e.indexInput+'" type="url" class="validate" value="'+e.link.url+'">\n      </div>\n    </div>\n  '}Object.defineProperty(t,"__esModule",{value:!0}),t.linkSkeleton=i,t.asideSkeleton=r,t.inputLinksSkeleton=a},{}],5:[function(e,n,t){"use strict";function i(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,n){for(var t=0;t<n.length;t++){var i=n[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(n,t,i){return t&&e(n.prototype,t),i&&e(n,i),n}}();t.TimerComponent=function(){function e(){i(this,e),console.log("Hello Timer components!"),this.time=new Date,this.displayTime()}return r(e,[{key:"displayTime",value:function(){var e=this,n=document.getElementById("time");n&&(n.innerHTML=this.getTime(this.time),n.style.fontSize="10rem",n.style.margin="0rem",setInterval(function(){e.time=new Date,n.innerHTML=e.getTime(e.time)},1e3))}},{key:"getTime",value:function(e){return'\n    <time datetime="'+(e.getFullYear()<10?"0"+e.getFullYear():e.getFullYear())+"-"+(e.getMonth()<10?"0"+e.getMonth():e.getMonth())+"-"+(e.getDate()<10?"0"+e.getDate():e.getDate())+" "+(e.getHours()<10?"0"+e.getHours():e.getHours())+":"+(e.getMinutes()<10?"0"+e.getMinutes():e.getMinutes())+":"+(e.getSeconds()<10?"0"+e.getSeconds():e.getSeconds())+'">\n      '+(e.getHours()<10?"0"+e.getHours():e.getHours())+":"+(e.getMinutes()<10?"0"+e.getMinutes():e.getMinutes())+"\n    </time >\n    "}}]),e}()},{}],6:[function(e,n,t){"use strict";function i(e){return'\n    <section class=" valign-wrapper ">\n      <div class="valign">\n        <div class=" row">\n\n          <div class="col s6 offset-s3">\n            <h1>'+e.pageTitle+'</h1>\n            <p>Enter your email to use this application</p>\n            <form>\n              <p>\n                <input type="email" name="email" value="" placeholder="your@email.com"  /><br/>\n                <button>Login</button>\n              </p>\n            </form>\n          </div>\n\n        </div>\n      </div>\n\n    </section>'}Object.defineProperty(t,"__esModule",{value:!0}),t.homeSkeleton=i},{}],7:[function(e,n,t){"use strict";function i(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.HomePage=void 0;var r=function(){function e(e,n){for(var t=0;t<n.length;t++){var i=n[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(n,t,i){return t&&e(n.prototype,t),i&&e(n,i),n}}(),a=e("./home-skeleton"),o=e("../../pages/user/user");t.HomePage=function(){function e(n,t){i(this,e),this.appBody=n,this.pageTitle="Welcome",this.storage=t,this.initUI()}return r(e,[{key:"initUI",value:function(){document.getElementsByTagName("section")[0]&&document.getElementsByTagName("section")[0].parentNode.removeChild(document.getElementsByTagName("section")[0]);var e=this.getPageSkeleton();this.appBody.insertAdjacentHTML("afterbegin",e),this.loadEventUI()}},{key:"getPageSkeleton",value:function(){var e={};return e.pageTitle=this.pageTitle,(0,a.homeSkeleton)(e)}},{key:"loadEventUI",value:function(){var e=this,n=document.getElementsByTagName("form")[0];n.addEventListener("submit",function(n){return e.onLogin(n)},!1)}},{key:"onLogin",value:function(e){e.preventDefault();for(var n=0,t={},i=document.forms[0].elements,r=0;r<i.length;r++)i[r].value&&(t[i[r].name]=i[r].value,n++);n===i.length-1&&(this.storage.login(t),console.log("load UserPage"),new o.UserPage(this.appBody,this.storage))}}]),e}()},{"../../pages/user/user":9,"./home-skeleton":6}],8:[function(e,n,t){"use strict";function i(e){return'\n    <section class="valign-wrapper">\n\n      <nav class="row transparent z-depth-0 flow-text">\n        <div class="input-field col s6">\n            <div class="input-field">\n              <input id="search" type="search" required>\n              <label for="search"><i class="material-icons">search</i></label>\n              <i class="material-icons" id="closeSearch">close</i>\n            </div>\n        </div>\n        <div class="col s6 right-align">\n            <i id="download" class="material-icons">file_download</i>\n        </div>\n      </nav>\n\n      <main class="valign center-align">\n        <div class="row">\n          <div class="col s12">\n            <h1 id="time"></h1>\n            <p class="greetings"><span id="geetingTitle">'+e.pageTitle+"</span> "+e.userName+'!</p>\n          </div>\n        </div>\n        <div id="LinksComponent"></div>\n      </main>\n\n      <footer>\n        <div class="row">\n          <div class="col s6 left-align">Photo by <address class="author"></address></div>\n          <div class="col s6 right-align">This app using <a href="https://unsplash.com" target="_blank" title="Unsplash API">Unsplash API</a></div>\n        </div>\n      </footer>\n\n    </section>\n  '}Object.defineProperty(t,"__esModule",{value:!0}),t.userSkeleton=i},{}],9:[function(e,n,t){"use strict";function i(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.UserPage=void 0;var r=function(){function e(e,n){for(var t=0;t<n.length;t++){var i=n[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(n,t,i){return t&&e(n.prototype,t),i&&e(n,i),n}}(),a=e("./user-skeleton"),o=e("../../components/timer/timer-component"),s=e("../../components/links/links-component"),l=e("../../components/background/background-component");t.UserPage=function(){function e(n,t){i(this,e),this.appBody=n,this.storageService=t,this.formData=this.storageService.db[this.storageService.currentUser].user,this.pageTitle=this.grettings(),this.userName=this.getUserName(),this.initUI(),this.loadEventUI()}return r(e,[{key:"initUI",value:function(){document.getElementsByTagName("section")[0]&&document.getElementsByTagName("section")[0].parentNode.removeChild(document.getElementsByTagName("section")[0]);var e=this.getPageSkeleton();this.appBody.insertAdjacentHTML("afterbegin",e),document.getElementsByTagName("section")[0].classList.add("displayOpacity"),this.displayTime(),this.displayLinks(),this.getBackgroundIMG()}},{key:"getPageSkeleton",value:function(){var e={};return e.pageTitle=this.pageTitle,e.userName=this.userName,(0,a.userSkeleton)(e)}},{key:"loadEventUI",value:function(){var e=this,n=document.getElementById("search");n&&(n.addEventListener("keyup",function(n){13===n.keyCode&&n.target.value.length>=1&&(console.log("https://www.google.ch/search?q="+n.target.value),e.onGoToLink(n,"https://www.google.ch/search?q="+n.target.value),n.target.value="",n.target.blur())}),n.focus());var t=document.getElementById("icon-search");t&&t.addEventListener("click",function(e){n&&n.focus()});var i=document.getElementById("closeSearch");i&&i.addEventListener("click",function(e){n&&(n.value="",n.blur())})}},{key:"displayTime",value:function(){new o.TimerComponent}},{key:"displayLinks",value:function(){new s.LinksComponent(this.storageService)}},{key:"getBackgroundIMG",value:function(){new l.BackgroundComponent}},{key:"onGoToLink",value:function(e,n){e.preventDefault();var t=window.open(n,"_blank");t.focus()}},{key:"grettings",value:function e(){var n=this,e=this.getGreetings();return setInterval(function(){e=n.getGreetings();var t=document.getElementById("geetingTitle");t&&(t.innerHTML=e)},15e3),e}},{key:"getGreetings",value:function(){var e=new Date,n=void 0;switch(!0){case e.getHours()>5&&e.getHours()<=10:n="Good morning";break;case e.getHours()>=11&&e.getHours()<=17:n="Hello";break;default:n="Good evening"}return n}},{key:"getUserName",value:function(){return this.formData.email.split("@")[0].split(" ").map(function(e){return e.slice(0,1).toUpperCase()+e.slice(1)}).join(" ")}}]),e}()},{"../../components/background/background-component":2,"../../components/links/links-component":3,"../../components/timer/timer-component":5,"./user-skeleton":8}],10:[function(e,n,t){"use strict";function i(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,n){for(var t=0;t<n.length;t++){var i=n[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(n,t,i){return t&&e(n.prototype,t),i&&e(n,i),n}}();t.LinksService=function(){function e(){i(this,e),console.log("Hello LinksService!"),this.arrayData=[]}return r(e,[{key:"initData",value:function(e){this.storageService=e;var n=this.storageService.db[this.storageService.currentUser].user;n.links&&(this.arrayData=n.links)}},{key:"getData",value:function(){var e=this;return new Promise(function(n){n(e.arrayData)})}},{key:"saveData",value:function(e){console.log("LinksService: Save data-> ",e),this.storageService.db[this.storageService.currentUser].user.links=e,this.storageService.update()}}]),e}()},{}],11:[function(e,n,t){"use strict";function i(e){if(Array.isArray(e)){for(var n=0,t=Array(e.length);n<e.length;n++)t[n]=e[n];return t}return Array.from(e)}function r(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,n){for(var t=0;t<n.length;t++){var i=n[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(n,t,i){return t&&e(n.prototype,t),i&&e(n,i),n}}();t.StorageService=function(){function e(){r(this,e),this.dbName="browser-dev",this.db=[],this.currentUser=null}return a(e,[{key:"loadData",value:function(){var e=this.read();if(e){var n;(n=this.db).push.apply(n,i(e))}else this.create(),this.db.push({});console.log("StorageService: database ready ->",this.db)}},{key:"isAuth",value:function(){for(var e=0;e<this.db.length;e++)if(this.db[e].user&&this.db[e].user.isAuth)return this.currentUser=e,this.db[e].user.isAuth}},{key:"login",value:function(e){var n=this,t=this.isAuth();if(console.log("StorageService: login->",t,e),!t)if(this.db.length>0){var i=!1;if(this.db.forEach(function(t,r){e.email===t.user.email&&(console.log("found user-> ",t.user),i=!0,n.db[r].user.isAuth=!0,n.currentUser=r,n.update())}),i===!1){var r={};r.user=e,r.user.isAuth=!0,this.currentUser=this.db.length,this.db.push(r),console.log("add new user-> ",r),this.update()}}else{var a={};a.user=e,a.user.isAuth=!0,this.db.push(a),this.currentUser=0,console.log("create first user-> ",a),this.update()}}},{key:"create",value:function(){console.log("StorageService: create->",this.dbName),localStorage.setItem(this.dbName,JSON.stringify([]))}},{key:"read",value:function(){console.log("StorageService: read->",this.dbName);var e=localStorage.getItem(this.dbName);if(e)return JSON.parse(e)}},{key:"update",value:function(){console.log("StorageService: update->",this.db),localStorage.setItem(this.dbName,JSON.stringify(this.db))}},{key:"delete",value:function(e){}}]),e}()},{}],12:[function(e,n,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.API_KEY_CONFIG={client_id:"8560f3274856a42259232fa219050bc7edc3d7025514987a4b3b0becc17ba029",client_secret:"4674868e0865fcf7a2b63e1570d98f6e7470d8cd2cad3c4d7f8573c82702436d"}},{}],13:[function(e,n,t){"use strict";function i(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.UnsplashService=void 0;var r=function(){function e(e,n){for(var t=0;t<n.length;t++){var i=n[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(n,t,i){return t&&e(n.prototype,t),i&&e(n,i),n}}(),a=e("../../providers/unsplash/apiKey-config");t.UnsplashService=function(){function e(){i(this,e),this.data=[],this.params=a.API_KEY_CONFIG,this.queryUrl="https://api.unsplash.com/photos/random?count=1&client_id=",console.log("hello UnsplashService!")}return r(e,[{key:"getRandomImg",value:function(){var e=this;return new Promise(function(n,t){var i=new XMLHttpRequest;i.open("GET",e.queryUrl+e.params.client_id),i.onload=function(){200==i.status?n(i.responseText):t(Error(i.statusText))},i.onerror=function(){t(Error("Network Error"))},i.send()})}}]),e}()},{"../../providers/unsplash/apiKey-config":12}]},{},[1]);
//# sourceMappingURL=bundle.js.map
